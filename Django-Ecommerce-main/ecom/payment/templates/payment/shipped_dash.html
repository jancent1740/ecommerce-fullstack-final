{% extends 'base.html' %}
{% load static %}
{% block content %}

<!-- ================= HERO / DASH HEADER ================= -->
<header class="py-4" style="background: linear-gradient(135deg, #0f172a, #020617);">
    <div class="container d-flex flex-wrap justify-content-between align-items-center">

        <div>
            <h2 class="text-white fw-bold mb-1">
                Shipped Orders
            </h2>
            <p class="text-white-50 mb-0">
                Review all items that have been shipped to customers
            </p>
        </div>

        <div class="mt-3 mt-md-0">
            <span class="badge rounded-pill bg-info text-dark px-3 py-2">
                {{ orders|length }} Shipped
            </span>
        </div>

    </div>
</header>

<!-- ================= ORDERS ================= -->
<div class="container my-5">
    {% for item in orders %}
    <div class="card bg-black border border-info shadow-sm mb-3">
        <div class="card-body">

            <div class="row align-items-center">

                <!-- Order ID -->
                <div class="col-12 col-md-2">
                    <div class="text-info small fw-bold">Order</div>
                    <a href="{% url 'orders' item.id %}" class="text-white fw-bold text-decoration-none">
                        #{{ item.id }}
                    </a>
                </div>

                <!-- Price -->
                <div class="col-12 col-md-2 mt-3 mt-md-0">
                    <div class="text-info small fw-bold">Amount</div>
                    <span class="text-white fw-semibold">${{ item.amount_paid }}</span>
                </div>

                <!-- Customer Email -->
                <div class="col-12 col-md-4 mt-3 mt-md-0">
                    <div class="text-info small fw-bold">Customer</div>
                    <span class="text-white-50">{{ item.email }}</span>
                </div>

                <!-- Date Shipped -->
                <div class="col-12 col-md-2 mt-3 mt-md-0">
                    <div class="text-info small fw-bold">Shipped On</div>
                    <span class="text-white-50">
                        {{ item.date_shipped|date:"M d, Y" }}
                    </span>
                </div>

                <!-- Action Buttons -->
                <div class="col-12 col-md-2 d-flex flex-column flex-md-row gap-2 justify-content-md-end align-items-center mt-3 mt-md-0">
                    <!-- Mark Unshipped -->
                    <form method="POST" class="d-inline m-0">
                        {% csrf_token %}
                        <input type="hidden" name="shipping_status" value="false">
                        <input type="hidden" name="num" value="{{ item.id }}">
                        <button type="submit" class="btn btn-outline-info btn-sm neon-hover action-btn">
                            Mark Unshipped
                        </button>
                    </form>

                    <!-- View Details -->
                    <a href="{% url 'orders' item.id %}" class="btn btn-outline-light btn-sm neon-hover action-btn">
                        View Details
                    </a>
                </div>

            </div>

        </div>
    </div>
    {% empty %}
    <div class="text-center text-white-50 py-5">
        No shipped items yet ðŸŽ‰
    </div>
    {% endfor %}
</div>

<!-- ================= STYLES ================= -->
<style>
.card {
    background: #0b0f1a; /* Dark black-blue base */
    border-color: #5da9e9 !important; /* Neon blue border */
    box-shadow: 0 0 20px rgba(93,169,233,0.2);
    transition: transform 0.3s ease, box-shadow 0.3s ease;
}

.card-body {
    transition: all 0.3s ease;
}

.card-body:hover {
    background: rgba(93, 169, 233, 0.05);
    transform: translateY(-3px);
}

.text-info {
    color: #5da9e9 !important;
}

.text-white-50 {
    color: rgba(255,255,255,0.7) !important;
}

/* Button neon behavior */
.neon-hover {
    border-color: #5da9e9;
    color: #5da9e9;
    text-shadow: 0 0 8px rgba(93,169,233,0.7);
    transition: all 0.25s ease;
}
.neon-hover:hover {
    background: #5da9e9;
    color: #0b0f1a;
    box-shadow: 0 0 20px rgba(93,169,233,0.9);
}

/* Make both action buttons equal width and size */
.action-btn {
    min-width: 110px;
    padding-left: 0.7rem;
    padding-right: 0.7rem;
    white-space: nowrap; /* Prevent text wrapping */
}


/* Responsive: stack buttons on small screens */
@media (max-width: 767.98px) {
    .action-btn { width: 100%; min-width: unset; }
    .card-body { padding: 1rem; }
}
</style>

{% endblock %}
